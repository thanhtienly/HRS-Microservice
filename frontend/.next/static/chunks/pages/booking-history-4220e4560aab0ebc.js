(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{397:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var l=s(7876),r=s(4232);function n(e){let[t,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(e.message){s(!0);let t=setTimeout(()=>{s(!1),e.onTimeOut(!1)},e.duration);return()=>{clearTimeout(t)}}},[e.duration]),(0,l.jsx)("div",{className:"w-[200] fixed flex flex-col text-black bg-green-500 rounded-md border-l-10 border-green-700 z-200 ".concat(t?"animate-fade-in top-[75] right-[20]":"hidden top-[75] right-[0]"),children:(0,l.jsx)("div",{className:"pt-2 pb-2 pl-3 pr-3 w-full",children:(0,l.jsx)("p",{children:e.message})})})}},2371:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var l=s(7876),r=s(6102),n=s(4232),a=s(9159);let o=(0,a.A)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var i=s(3616);function c(e){let[t,s]=(0,n.useState)(""),[r,a]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,f]=(0,n.useState)(""),[m,h]=(0,n.useState)(!1),[x,p]=(0,n.useState)(""),[v,j]=(0,n.useState)(),[g,w]=(0,n.useState)([]),[b,N]=(0,n.useState)([]);(0,n.useEffect)(()=>{var e=(0,i.getCookie)("accessToken");if(e)return void s(e)},[]),(0,n.useEffect)(()=>{e.reservationId&&d(e.reservationId)},[e.reservationId]),(0,n.useEffect)(()=>{e.secret&&f(e.secret)},[e.secret]),(0,n.useEffect)(()=>{console.log("Current reservationId is ".concat(c))},[c]),(0,n.useEffect)(()=>{console.log("Current secret is ".concat(u)),t&&u&&0==g.length&&y().then(e=>{N(e)}).catch(e=>{console.log(e)})},[u,t,g]),(0,n.useEffect)(()=>{!0==e.isOpenModal&&a(!0)},[e.isOpenModal]),(0,n.useEffect)(()=>{console.log(g)},[g]);let y=async()=>await fetch("".concat("http://localhost:3001","/booking/participants"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({secret:u})}).then(e=>e.json()).then(e=>{if(e.success)return e.data}).catch(e=>{console.log(e)}),S=async s=>{await fetch("".concat("http://localhost:3001","/auth/student/find-by-student-id"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({studentId:s})}).then(e=>e.json()).then(t=>{if(t.success){j(t.data),h(!0);return}e.onError(!0,t.message)}).catch(t=>{e.onError(!0,"Internal Server Error")})},C=e=>{console.log(e.target);let t=e.target.value;console.log(t),w(g.filter(e=>e.studentId!=t))},k=async e=>{let t=e.target.value;if(!t.match(/^[0-9]{7}$/))return void h(!1);p(t),await S(x)},E=async()=>{let s=g.map(e=>({email:e.email,studentId:e.studentId}));await fetch("".concat("http://localhost:3001","/booking/invite"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({participants:s,reservationId:c})}).then(e=>e.json()).then(t=>{if(t.success){e.onSuccess(!0,"Send invitation successful"),w([]);return}e.onError(!0,t.message)}).catch(t=>{e.onError(!0,"Internal Server Error")})};return(0,l.jsx)("div",{className:"".concat(r?"fixed":"hidden"," top-0 left-0 w-full h-screen flex flex-row justify-center pt-[160] pb-[20] pl-[20] pr-[20] z-50 bg-[rgba(0,0,0,0.5)]"),onClick:e=>{if(e.preventDefault(),m){if(-1==Array.from(e.target.classList).indexOf("studentInfo")){h(!1),p("");return}var t=!1;g.forEach(e=>{e.studentId==(null==v?void 0:v.studentId)&&(t=!0)}),t||w([...g,v]),h(!1),p("")}},children:(0,l.jsxs)("div",{className:"w-full min-h-[300] h-fit lg:w-1/2 p-2 flex flex-col bg-white rounded-lg",children:[(0,l.jsx)("div",{className:"w-full flex justify-end",children:(0,l.jsx)("button",{className:"p-1 w-fit h-fit flex justify-center items-center bg-slate-200 rounded-md cursor-pointer hover:bg-red-200",onClick:()=>{a(!1),e.onClose(!1)},children:(0,l.jsx)(o,{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})}),(0,l.jsxs)("div",{className:"mt-4 w-full text-sm",children:[(0,l.jsx)("label",{htmlFor:"inviteSearch",className:"text-xs font-semibold italic",children:"Search and invite your friends"}),(0,l.jsxs)("div",{className:"w-full relative",children:[(0,l.jsx)("input",{type:"text",name:"inviteSearch",id:"inviteSearch",className:"h-[30] pt-1 pb-1 pl-2 pr-2  w-full border-[1] border-slate-900 rounded-md outline-none hover:border-blue-500 focus:border-blue-500",placeholder:"Provide student id to search",onChange:e=>{p(e.target.value)},onKeyUp:k,value:x}),(0,l.jsx)("div",{className:"".concat(m?"absolute":"hidden"," top-[30] left-0 w-full pt-1 pb-2 pl-2 pr-2 bg-slate-200 flex flex-col italic"),children:(0,l.jsxs)("div",{className:"studentInfo mt-1 pt-1 pb-2 pl-2 flex flex-col md:flex-row cursor-pointer rounded-lg hover:bg-white",children:[(0,l.jsx)("p",{className:"studentInfo mr-1 z-15",children:"Name: ".concat(null==v?void 0:v.firstName," ").concat(null==v?void 0:v.lastName,",")}),(0,l.jsx)("p",{className:"studentInfo mr-1",children:"studentId: ".concat(null==v?void 0:v.studentId,",")}),(0,l.jsx)("p",{className:"studentInfo mr-1",children:"gender: ".concat(null==v?void 0:v.gender,",")}),(0,l.jsx)("p",{className:"studentInfo mr-1",children:"email: ".concat(null==v?void 0:v.email)})]})})]})]}),(0,l.jsxs)("div",{className:"mt-4 w-full flex flex-col text-sm",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Participants List"}),(0,l.jsxs)("div",{className:"w-full flex flex-col",children:[b.map(e=>(0,l.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,l.jsxs)("div",{className:"basis-full flex flex-row",children:[(0,l.jsxs)("p",{children:["".concat(e.firstName," ").concat(e.lastName)," -"]}),(0,l.jsxs)("p",{className:"ml-1",children:[" ",e.studentId]})]}),(0,l.jsxs)("p",{className:"italic text-xs",children:[(0,l.jsx)("b",{children:"Status:"})," ",e.state]})]},e.studentId)),g.map(e=>(0,l.jsxs)("div",{className:"mt-2 flex flex-row",children:[(0,l.jsxs)("div",{className:"basis-full flex flex-row",children:[(0,l.jsxs)("p",{children:["".concat(e.firstName," ").concat(e.lastName)," -"]}),(0,l.jsxs)("p",{className:"ml-1",children:[" ",e.studentId]})]}),(0,l.jsx)("button",{className:"p-1 w-fit h-fit flex justify-center items-center bg-slate-200 rounded-md cursor-pointer hover:bg-red-200",value:e.studentId,onClick:C,children:(0,l.jsx)(o,{style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"}})})]},e.studentId))]})]}),0!=g.length&&(0,l.jsx)("div",{className:"mt-4 w-full flex flex-col items-center justify-center text-sm",children:(0,l.jsx)("button",{className:"pt-2 pb-2 pl-3 pr-3 bg-slate-900 text-white rounded-md cursor-pointer hover:bg-yellow-500 hover:text-black",onClick:E,children:"Send Invitation"})})]})})}function d(e){let[t,s]=(0,n.useState)(""),[r,a]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,f]=(0,n.useState)("");(0,n.useEffect)(()=>{var e=(0,i.getCookie)("accessToken");if(e)return void s(e)},[]),(0,n.useEffect)(()=>{!0==e.isOpenModal&&a(!0)},[e.isOpenModal]),(0,n.useEffect)(()=>{e.reservationId&&d(e.reservationId)},[e.reservationId]),(0,n.useEffect)(()=>{e.secret&&f(e.secret)},[e.secret]),(0,n.useEffect)(()=>{console.log("Current reservationId is ".concat(c))},[c]);let m=async()=>{console.log("Cancel reservation request"),await fetch("".concat("http://localhost:3001","/booking/cancel"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({reservationId:c})}).then(e=>e.json()).then(t=>{if(t.success)return void e.onSuccess(!0,"Cancel booking successful");e.onError(!0,t.message)}).catch(t=>{e.onError(!0,"Internal Server Error")})};return(0,l.jsx)("div",{className:"".concat(r?"fixed":"hidden"," top-0 left-0 w-full h-screen flex flex-row justify-center pt-[160] pb-[20] pl-[20] pr-[20] z-50 bg-[rgba(0,0,0,0.5)]"),children:(0,l.jsxs)("div",{className:"w-full h-fit lg:w-1/2 p-2 pb-6 flex flex-col bg-white rounded-lg",children:[(0,l.jsx)("div",{className:"w-full flex justify-end",children:(0,l.jsx)("button",{className:"p-1 w-fit h-fit flex justify-center items-center bg-slate-200 rounded-md cursor-pointer hover:bg-red-200",onClick:()=>{a(!1),e.onClose(!1)},children:(0,l.jsx)(o,{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"}})})}),(0,l.jsx)("div",{className:"mt-5 w-full flex items-center justify-center",children:(0,l.jsx)("p",{className:"p-3 text-2xl text-center",children:"Do you want to continue canceling the reservation?"})}),(0,l.jsx)("div",{className:"mt-2 w-full flex items-center justify-center",children:(0,l.jsx)("button",{className:"pt-2 pb-2 pl-3 pr-3 bg-slate-900 text-white rounded-md cursor-pointer hover:bg-red-500 hover:text-white",onClick:m,children:"Continue"})})]})})}s(3451);var u=s(3825),f=s(397);let m=(0,a.A)((0,l.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m3.3 14.71L11 12.41V7h2v4.59l3.71 3.71z"}),"AccessTimeFilled"),h=(0,a.A)((0,l.jsx)("path",{d:"M19 19V5c0-1.1-.9-2-2-2H7c-1.1 0-2 .9-2 2v14H3v2h18v-2zm-4-6h-2v-2h2z"}),"DoorFront");var x=s(9099);function p(){let e=(0,x.useRouter)(),[t,s]=(0,n.useState)("incoming"),[a,o]=(0,n.useState)(),[p,v]=(0,n.useState)(!1),[j,g]=(0,n.useState)(""),[w,b]=(0,n.useState)(""),[N,y]=(0,n.useState)([]),[S,C]=(0,n.useState)(!1),[k,E]=(0,n.useState)(),[I,T]=(0,n.useState)(!1),[O,z]=(0,n.useState)(),[A,_]=(0,n.useState)(!1),D={individual:"Individual"};(0,n.useEffect)(()=>{let t=(0,i.getCookie)("accessToken");if(t)return void o(t);e.push("/login?redirect=".concat("http://localhost:80","/booking-history"))},[e]),(0,n.useEffect)(()=>{a&&F().then(()=>{}).catch(e=>{console.log(e)})},[a]),(0,n.useEffect)(()=>{F().then(()=>{}).catch(e=>{console.log(e)})},[t]);let L=e=>{e.preventDefault(),s(e.currentTarget.value)},M=(e,t)=>{T(e),z(t)},P=e=>{e.preventDefault(),g(e.currentTarget.value),b(e.currentTarget.getAttribute("security")),v(!0)},B=e=>{e.preventDefault(),g(e.currentTarget.value),b(e.currentTarget.getAttribute("security")),_(!0)},F=async()=>{await fetch("".concat("http://localhost:3001","/booking/history?category=").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then(e=>e.json()).then(e=>{e.success&&y(e.data)}).catch(e=>{console.log(e)})};return(0,l.jsxs)(l.Fragment,{children:[S&&(0,l.jsx)(f.A,{message:k,duration:3e3,onTimeOut:e=>{C(e)}}),I&&(0,l.jsx)(u.A,{message:O,duration:3e3,onTimeOut:e=>{T(e)}}),p&&(0,l.jsx)(c,{isOpenModal:p,onClose:e=>{g(""),b(""),v(e)},reservationId:j,onError:M,onSuccess:(e,t)=>{C(e),E(t)},secret:w}),A&&(0,l.jsx)(d,{isOpenModal:A,onClose:e=>{g(""),b(""),_(e)},reservationId:j,onError:M,onSuccess:(e,t)=>{C(e),E(t),F()},secret:w}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(r.A,{}),(0,l.jsx)("div",{className:"w-full h-screen flex flex-row justify-center pt-[80] pb-[20] pl-[20] pr-[20]",children:(0,l.jsxs)("div",{className:"w-full h-full lg:w-1/2 p-4 flex flex-col rounded-lg bg-slate-200 text-sm overflow-y-scroll",children:[(0,l.jsxs)("div",{className:"w-full p-1 flex flex-row rounded-lg bg-yellow-500",children:[(0,l.jsx)("button",{className:"pt-1 pb-1 pl-2 pr-2 rounded-md cursor-pointer ".concat("incoming"==t?"bg-white font-semibold":""),onClick:L,value:"incoming",children:"Upcoming"}),(0,l.jsx)("button",{className:"pt-1 pb-1 pl-2 pr-2 rounded-md cursor-pointer ".concat("past"==t?"bg-white font-semibold":""),onClick:L,value:"past",children:"Past"})]}),(0,l.jsx)("div",{className:"w-full mt-5 flex flex-col text-sm",children:N.map(e=>(0,l.jsxs)("div",{className:"mt-2 w-full flex flex-col items-center justify-center rounded-md bg-white text-gray-600 shadow-xl md:flex-row md:justify-start",children:[(0,l.jsx)("div",{className:"w-full pl-2 pr-2 md:w-fit md:pt-2 md:pb-2",children:(0,l.jsx)("div",{className:"flex flex-col justify-center items-center border-b-[1] border-gray-300 md:border-b-[0] md:border-r-[1]",children:(0,l.jsxs)("div",{className:"p-2 w-fit min-w-[80] flex flex-col justify-center items-center",children:[(0,l.jsx)("span",{className:"font-bold text-base text-red-600",children:new Date(e.date).toLocaleString("en-US",{month:"short",day:"2-digit"}).split(" ").reverse().join("-")}),(0,l.jsx)("span",{className:"font-bold text-base text-red-600",children:new Date(e.date).getFullYear()})]})})}),(0,l.jsxs)("div",{className:"w-full pl-2 pr-2 mt-1 flex flex-row italic md:w-fit md:min-w-[150] md:h-full md:mt-0 md:flex-col md:justify-center",children:[(0,l.jsxs)("div",{className:"w-1/2 flex flex-row items-center justify-start md:w-fit",children:[(0,l.jsx)(m,{sx:{color:"#4a5565",fontSize:16}}),(0,l.jsxs)("p",{className:"ml-1",children:[e.from," - ",e.to]})]}),(0,l.jsxs)("div",{className:"w-1/2 flex flex-row items-center justify-end md:w-fit md:mt-1",children:[(0,l.jsx)(h,{sx:{color:"#4a5565",fontSize:16}}),(0,l.jsx)("p",{className:"ml-1",children:e.roomType})]})]}),(0,l.jsxs)("div",{className:"w-full pl-2 pr-2 mt-1 mb-1 flex flex-col italic md:w-fit md:min-w-[120]",children:[(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsx)("p",{className:"font-bold",children:"Room:"}),(0,l.jsx)("p",{className:"ml-1",children:e.roomName})]}),(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsx)("p",{className:"font-bold",children:"Building:"}),(0,l.jsx)("p",{className:"ml-1",children:e.ssaName})]}),(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsx)("p",{className:"font-bold",children:"Capacity:"}),(0,l.jsx)("p",{className:"ml-1",children:e.roomCapacity})]}),(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsx)("p",{className:"font-bold",children:"Status:"}),(0,l.jsx)("p",{className:"ml-1",children:e.state})]})]}),"Booked"==e.state&&(0,l.jsxs)("div",{className:"w-full flex justify-end pl-2 pr-2 mt-1 mb-2 md:mb-1",children:[e.roomType!=D.individual&&(0,l.jsx)("button",{className:"pt-2 pb-2 pl-4 pr-4 bg-slate-900 text-white rounded-md cursor-pointer hover:bg-yellow-500 hover:text-black",onClick:P,value:e.id,security:e.secret,children:"Invite"},"invite-".concat(e.id)),(0,l.jsx)("button",{className:"ml-3 pt-2 pb-2 pl-4 pr-4 bg-red-900 text-white rounded-md cursor-pointer hover:bg-yellow-500 hover:text-black",onClick:B,value:e.id,security:e.secret,children:"Cancel"},"cancel-".concat(e.id))]})]},e.id))})]})})]})]})}},3451:()=>{},3825:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var l=s(7876),r=s(4232);function n(e){let[t,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(e.message){s(!0);let t=setTimeout(()=>{s(!1),e.onTimeOut(!1)},e.duration);return()=>{clearTimeout(t)}}},[e.duration]),(0,l.jsx)("div",{className:"min-w-[200] max-w-[250] fixed flex flex-col text-white bg-red-500 rounded-md border-l-10 border-red-700 z-200 ".concat(t?"animate-fade-in top-[75] right-[20]":"hidden top-[75] right-[0]"),children:(0,l.jsx)("div",{className:"pt-2 pb-2 pl-3 pr-3 w-full",children:(0,l.jsx)("p",{className:"whitespace-pre-line",children:e.message})})})}},5036:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking-history",function(){return s(2371)}])},6102:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var l=s(7876);s(3451);var r=s(4587),n=s.n(r),a=s(9840),o=s(4232),i=s(9099),c=s(8248);function d(){let e=(0,i.useRouter)(),t=(0,c.useGetCookie)(),s=(0,c.useDeleteCookie)(),[r,d]=(0,o.useState)(!0),[u,f]=(0,o.useState)(!1),m=()=>{if(window.innerWidth<1280)return void d(!0);d(!1)};return(0,o.useEffect)(()=>{t("accessToken")&&f(!0)},[t]),(0,o.useEffect)(()=>{m()},[]),(0,o.useEffect)(()=>(window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[]),(0,l.jsxs)("nav",{className:"fixed w-full bg-slate-900 p-2 flex flex-wrap items-center xl:flex-row sm:flex-col z-100",children:[(0,l.jsxs)("div",{className:"logo-container flex flex-row w-full xl:w-1/3",children:[(0,l.jsx)("div",{className:"wrap-logo w-1/2",children:(0,l.jsx)("a",{href:"/",className:"flex max-w-fit",children:(0,l.jsx)(n(),{src:"/logo.jpg",alt:"Logo",width:100,height:50,className:"ml-4"})})}),(0,l.jsx)("div",{className:"wrap-expand w-1/2 flex justify-end xl:hidden",children:(0,l.jsx)("div",{onClick:()=>{if(r)return void d(!r);d(!r)},children:(0,l.jsx)(a.A,{fontSize:"large",className:"cursor-pointer",sx:{color:"white"}})})})]}),(0,l.jsxs)("div",{className:"page flex flex-col justify-start xl:flex-row xl:justify-center w-full xl:w-1/3 ".concat(r?"hidden":""),children:[(0,l.jsx)("a",{href:"/room",className:"ml-4 mr-4 mt-1 mb-1 p-2 cursor-pointer text-white hover:bg-yellow-400 hover:text-slate-950 hover:rounded-md",children:"Booking"}),(0,l.jsx)("a",{href:"/booking-history",className:"ml-4 mr-4 mt-1 mb-1 p-2 cursor-pointer text-white hover:bg-yellow-400 hover:text-slate-950 hover:rounded-md",children:"History"})]}),(0,l.jsxs)("div",{className:"auth flex justify-start xl:justify-end w-full xl:w-1/3 ".concat(r?"hidden":""),children:[!1==u&&(0,l.jsx)("a",{className:"ml-4 mr-4 mt-1 mb-1 cursor-pointer pt-2 pb-2 pl-4 pr-4 bg-white text-slate-950 rounded-lg hover:bg-yellow-400",href:"/login",children:"Login"}),u&&(0,l.jsx)("button",{className:"ml-4 mr-4 mt-1 mb-1 cursor-pointer pt-2 pb-2 pl-4 pr-4 bg-white text-slate-950 rounded-lg hover:bg-yellow-400",onClick:()=>{s("accessToken"),s("refreshToken"),console.log("Reload"),e.reload()},children:"Logout"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[327,3,636,593,792],()=>t(5036)),_N_E=e.O()}]);